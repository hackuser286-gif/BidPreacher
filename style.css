/* ===========================
   OMNITRIX â€” GLOBAL THEME
   =========================== */

:root {
  --bg: #070a08;
  --panel: #0b0f0e;
  --ink: #e6ffe6;

  --omni: #27ff6f;      /* main neon green */
  --omni-dim: #15aa4a;  /* dimmer neon */
  --omni-ghost: #0f3f25;

  --ring: #1dff63;
  --ring-inner: #0cf06a;

  --shadow-omni: 0 0 1.2rem rgba(39,255,111,.65),
                 0 0 3.5rem rgba(39,255,111,.35);

  --shadow-holo: 0 0 1.1rem rgba(39,255,111,.55),
                 inset 0 0 2.5rem rgba(39,255,111,.35);

  --radius-2xl: 1.25rem;

  --size-watch: clamp(260px, 60vmin, 440px);
  --size-dial:  calc(var(--size-watch) * 0.52);
  --size-holo:  calc(var(--size-watch) * 0.62);
}

@media (prefers-reduced-motion: reduce) {
  * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; }
}

* { box-sizing: border-box; }

html, body {
  height: 100%;
  background: radial-gradient(1200px 1200px at 50% -20%, #0f2a1a 0%, var(--bg) 45%);
  color: var(--ink);
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Noto Sans", Arial;
}

/* App wrapper */
.app {
  min-height: 100%;
  display: grid;
  grid-template-rows: auto 1fr;
  align-items: start;
  justify-items: center;
  gap: 1.25rem;
  padding: 1.25rem;
}

/* HUD / Status */
.hud {
  width: min(900px, 92vw);
  background: linear-gradient(180deg, rgba(12,24,18,.7), rgba(6,12,9,.5));
  border: 1px solid rgba(39,255,111,.25);
  border-radius: var(--radius-2xl);
  padding: .65rem 1rem;
  backdrop-filter: blur(6px);
  box-shadow: var(--shadow-omni);
}

.hud__title {
  margin: 0;
  font-weight: 700;
  font-size: clamp(1rem, 2.2vw, 1.25rem);
  letter-spacing: .02em;
  color: #caffd7;
}

/* ===========================
   WATCH LAYOUT
   =========================== */

.watch {
  position: relative;
  width: var(--size-watch);
  display: grid;
  justify-items: center;
  gap: 1.2rem;
}

/* Hologram display */
.holo {
  position: relative;
  width: var(--size-holo);
  aspect-ratio: 1/1;
  border-radius: 50%;
  background:
    radial-gradient(60% 60% at 50% 55%, rgba(39,255,111,.25), transparent 70%),
    radial-gradient(circle at 50% 50%, rgba(24, 255, 121, .15), rgba(16, 36, 28, .35) 65%, rgba(8, 20, 16, .8));
  border: 2px solid var(--omni-dim);
  box-shadow: var(--shadow-holo);
  overflow: hidden;
  display: grid;
  place-items: center;
  isolation: isolate;
}

/* Hologram image */
#holoImage {
  max-width: 78%;
  max-height: 78%;
  object-fit: contain;
  filter:
    drop-shadow(0 0 0.6rem rgba(39,255,111,.55))
    drop-shadow(0 0 1.6rem rgba(39,255,111,.35))
    saturate(1.3)
    hue-rotate(-6deg);
  animation: holo-breathe 2.8s ease-in-out infinite;
  transform-origin: 50% 75%;
}

/* Scanlines + flicker overlay */
.holo::before,
.holo::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.holo::before {
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(39,255,111,.08) 0,
      rgba(39,255,111,.08) 2px,
      transparent 2px,
      transparent 4px
    );
  mix-blend-mode: screen;
  opacity: .65;
  animation: scanlines 4.5s linear infinite;
}

.holo::after {
  background: radial-gradient(120% 90% at 50% 10%, rgba(39,255,111,.18), transparent 55%);
  mix-blend-mode: color-dodge;
  opacity: .7;
  animation: holo-flicker 6s steps(40, end) infinite;
}

/* Alien name pill */
.holo__name {
  position: absolute;
  bottom: 7%;
  left: 50%;
  transform: translateX(-50%);
  padding: .35rem .75rem;
  background: rgba(12, 28, 22, .8);
  border: 1px solid rgba(39,255,111,.35);
  border-radius: 999px;
  font-weight: 700;
  font-size: clamp(.8rem, 1.8vw, 1rem);
  letter-spacing: .03em;
  text-transform: uppercase;
  color: #ccffd9;
  box-shadow: 0 0 .9rem rgba(39,255,111,.35);
}

/* ===========================
   DIAL (button)
   =========================== */

.dial {
  position: relative;
  width: var(--size-dial);
  aspect-ratio: 1/1;
  border: 0;
  background: transparent;
  border-radius: 999px;
  cursor: grab;
  outline: none;
  user-select: none;
  box-shadow:
    inset 0 0 .7rem rgba(39,255,111,.25),
    0 0 1.6rem rgba(39,255,111,.3);
  transition: transform .2s ease, filter .2s ease;
}

.dial:active { cursor: grabbing; }

.dial__face {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  filter: drop-shadow(0 0 .8rem rgba(39,255,111,.6));
}

.dial__ring-outer { fill: none; stroke: var(--ring); stroke-width: 2.5; }
.dial__ring-inner { fill: none; stroke: var(--ring-inner); stroke-width: 1.8; }
.dial__hourglass { fill: var(--omni); }

.dial__grip {
  position: absolute;
  inset: 9%;
  border-radius: 50%;
  background:
    radial-gradient(70% 70% at 50% 35%, rgba(255,255,255,.08), transparent 60%),
    radial-gradient(60% 60% at 55% 70%, rgba(39,255,111,.12), transparent 56%),
    conic-gradient(from 0deg, rgba(39,255,111,.1), transparent 180deg, rgba(39,255,111,.08));
  mix-blend-mode: screen;
  pointer-events: none;
}

/* Visual feedback when JS adds these states */
.dial.is-rotating { filter: brightness(1.05) saturate(1.1); }
.dial:active { transform: scale(.98); }

/* ===========================
   CONTROLS
   =========================== */

.controls {
  display: grid;
  grid-auto-flow: column;
  gap: .75rem;
}

.ctrl {
  min-width: 3rem;
  padding: .55rem .9rem;
  border-radius: .8rem;
  border: 1px solid rgba(39,255,111,.35);
  background: rgba(10, 24, 18, .7);
  color: #caffda;
  font-weight: 700;
  letter-spacing: .03em;
  cursor: pointer;
  transition: transform .12s ease, box-shadow .2s ease, background .2s ease;
  box-shadow: 0 0 .8rem rgba(39,255,111,.25);
}

.ctrl:hover { transform: translateY(-1px); box-shadow: 0 0 1.2rem rgba(39,255,111,.35); }
.ctrl:active { transform: translateY(0); }

.ctrl--primary {
  background: linear-gradient(180deg, rgba(39,255,111,.9), rgba(26,160,85,.9));
  color: #06260f;
  border-color: rgba(39,255,111,.85);
  text-shadow: 0 1px 0 rgba(255,255,255,.3);
}

/* ===========================
   ALIEN RING (positions handled in JS)
   =========================== */

.alien-ring {
  position: absolute;
  inset: 0;
  pointer-events: none;   /* visual only; dial captures input */
  list-style: none;
  margin: 0;
  padding: 0;
}

.alien {
  --size: clamp(30px, 6vmin, 56px);
  position: absolute;
  width: var(--size);
  height: var(--size);
  border-radius: 50%;
  background:
    radial-gradient(55% 55% at 50% 35%, rgba(39,255,111,.25), transparent 60%),
    rgba(12, 30, 22, .75);
  border: 1px solid rgba(39,255,111,.4);
  box-shadow: 0 0 .9rem rgba(39,255,111,.35);
  transform: translate(-50%, -50%);
  overflow: hidden;
}

/* Each li gets a background image via JS. If missing, show a placeholder */
.alien::after {
  content: "";
  position: absolute; inset: 12%;
  background-size: contain; background-repeat: no-repeat; background-position: center;
  filter: drop-shadow(0 0 .4rem rgba(39,255,111,.65)) saturate(1.1);
}

/* Active/selected alien (JS toggles .is-active) */
.alien.is-active {
  border-color: var(--ring);
  box-shadow:
    0 0 1.1rem rgba(39,255,111,.65),
    0 0 2rem rgba(39,255,111,.35);
}

/* ===========================
   TRANSFORMATION FLASH
   =========================== */

.flash {
  position: fixed;
  inset: 0;
  background:
    radial-gradient(70% 60% at 50% 50%, rgba(39,255,111,.9), rgba(39,255,111,.55) 35%, rgba(7,10,8,0) 70%),
    rgba(39,255,111,.08);
  pointer-events: none;
  opacity: 0;
  mix-blend-mode: screen;
  transition: opacity .18s ease-out;
}

.flash.is-on { opacity: 1; animation: transform-flash .55s ease-out forwards; }

/* ===========================
   ANIMATIONS
   =========================== */

@keyframes holo-breathe {
  0%,100% { transform: translateZ(0) scale(1); filter: brightness(1); }
  50%     { transform: translateZ(0) scale(1.025); filter: brightness(1.05) saturate(1.1); }
}

@keyframes scanlines {
  0%   { background-position-y: 0; }
  100% { background-position-y: 8px; }
}

@keyframes holo-flicker {
  0%,2%,4%,7%,9%   { opacity: .85; }
  3%,8%            { opacity: .65; }
  30%              { opacity: .9; }
  50%              { opacity: .7; }
  60%              { opacity: .86; }
  80%              { opacity: .75; }
  100%             { opacity: .88; }
}

@keyframes transform-flash {
  0%   { opacity: 0; }
  10%  { opacity: 1; }
  30%  { opacity: .75; }
  55%  { opacity: .35; }
  100% { opacity: 0; }
}

/* ===========================
   RESPONSIVE TWEAKS
   =========================== */

@media (max-width: 520px) {
  .controls { gap: .55rem; }
  .ctrl { padding: .5rem .75rem; }
  .holo__name { font-size: .85rem; }
}

/* ===========================
   UTILITY STATE: when body has .is-transforming
   (JS will add/remove this quickly)
   =========================== */

body.is-transforming .dial {
  filter: brightness(1.15) saturate(1.2);
  animation: dial-thrum .6s ease-in-out;
}

@keyframes dial-thrum {
  0% { transform: scale(1); }
  40% { transform: scale(1.06); }
  100% { transform: scale(1); }
}
