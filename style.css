:root{
  /* Scale everything here */
  --dial-size: min(72vw, 360px);
  --hud-width: min(92vw, 760px);

  --neon: #00ff66;
  --neon-soft: rgba(0,255,102,.45);
  --neon-dim: rgba(0,255,102,.25);
  --bg: #000;
  --bg2: #03150b;
  --hud: #0b1d14;
  --ring: #073b21;
  --text: #c8ffd9;
  --warning: #ff4545;
}

/* Reset */
* { box-sizing: border-box; margin: 0; padding: 0; }
html, body { height: 100%; }
img { display: block; max-width: 100%; height: auto; }

/* Stage */
body{
  background:
    radial-gradient(1200px 600px at 50% 20%, #072117 0%, #000 60%),
    #000;
  color: var(--text);
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  overflow: hidden;
}
.stage{
  min-height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  place-items: center;
  gap: 18px;
  padding: 20px 16px 28px;
}

/* HUD */
.hud{
  width: var(--hud-width);
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(12,32,24,.6), rgba(6,18,12,.6));
  border: 1px solid rgba(0,255,102,.2);
  box-shadow: 0 0 24px rgba(0,255,102,.15) inset, 0 0 24px rgba(0,255,102,.08);
}
.hud-left{ display:flex; align-items:center; gap:10px }
.badge{
  padding: 6px 10px; border-radius: 10px;
  background: rgba(0,255,102,.08);
  border: 1px solid rgba(0,255,102,.25);
  font-weight: 800; letter-spacing:.8px; color: var(--neon);
  text-shadow: 0 0 8px var(--neon);
}
.state{
  font-weight:700; letter-spacing:.6px;
  color: var(--text);
}
.hud-center{
  position: relative; width: 160px; height: 110px;
  display:grid; place-items:center;
}
.energy-ring{ width: 110px; height: 110px; }
.ring-bg{
  fill: none; stroke: #0f2a1f; stroke-width: 10;
  filter: drop-shadow(0 0 10px rgba(0,0,0,.6));
}
.ring-fg{
  fill: none; stroke: url(#g); stroke-width: 10; stroke-linecap: round;
  transform: rotate(-90deg); transform-origin: 60px 60px;
  stroke-dasharray: 100; stroke-dashoffset: 0;
  filter: drop-shadow(0 0 6px var(--neon));
  transition: stroke-dashoffset .25s ease;
}
.percent{
  position:absolute; bottom: 6px; font-weight:800; color: var(--neon);
  text-shadow: 0 0 6px var(--neon);
}
.hud-right{
  justify-self: end;
}
.cooldown{
  min-width: 150px; text-align: right;
  color: var(--text);
}

/* Omnitrix */
.omnitrix{ display:grid; justify-items:center; }

.dial{
  width: var(--dial-size); height: var(--dial-size);
  position: relative; border-radius: 50%;
  cursor: pointer; touch-action: none; user-select: none;
  filter: drop-shadow(0 0 18px var(--neon-soft));
  transition: transform .06s linear;
}
#dialImage{
  width: 100%; height: 100%; object-fit: contain; pointer-events: none;
  transform: rotate(0deg); transition: transform .06s linear;
}

/* CSS fallback dial if PNG missing */
.dial-fallback{
  display:none; position:absolute; inset:0; border-radius:50%;
  background:
    radial-gradient(circle at 50% 50%, rgba(0,0,0,0) 63%, rgba(0,0,0,.75) 64%) ,
    radial-gradient(circle at 50% 50%, var(--ring) 0 61%, #02150b 62% 100%);
}
.dial-fallback::before,
.dial-fallback::after{
  content:""; position:absolute; inset:16%; border-radius:50%;
  background:
    conic-gradient(from 45deg,
      var(--neon) 0 25%, transparent 0 50%,
      var(--neon) 0 75%, transparent 0 100%);
  filter: drop-shadow(0 0 14px var(--neon));
}
.dial-fallback::after{ transform: rotate(90deg); }

/* Hologram inside the dial */
.holo{
  position:absolute; inset: 10%;
  display:none; place-items:center; text-align:center; pointer-events:none;
}
.holo-ring{
  position:absolute; inset:0; border-radius:50%;
  background:
    radial-gradient(circle, rgba(0,255,102,.18) 0, rgba(0,255,102,.08) 35%, rgba(0,0,0,0) 55%);
  animation: ring-pulse 2.4s ease-in-out infinite;
}
.holo img{
  width: 64%; max-width: 230px;
  filter: drop-shadow(0 0 12px var(--neon)) drop-shadow(0 0 22px var(--neon));
  animation: holo-float 3s ease-in-out infinite;
}
.holo-name{
  position:absolute; bottom: 2%;
  font-weight: 800; letter-spacing: .65px; color: var(--neon);
  text-shadow: 0 0 8px var(--neon), 0 0 18px var(--neon);
}

/* Scan sweep + static glitch */
.scan{
  position:absolute; inset:0; border-radius:50%; overflow:hidden; pointer-events:none;
  mask: radial-gradient(circle, #000 62%, transparent 64%); /* hide outside inner circle */
}
.scan::before{
  content:""; position:absolute; inset:-40%;
  background:
    conic-gradient(from 0deg, rgba(0,255,102,.0), rgba(0,255,102,.18), rgba(0,255,102,.0));
  animation: scan-rotate 3.5s linear infinite;
  filter: blur(4px);
  transform-origin: 50% 50%;
}
.static{
  position:absolute; inset:0; border-radius:50%; pointer-events:none;
  background: repeating-linear-gradient(0deg,
    rgba(0,255,102,.06), rgba(0,255,102,.06) 2px,
    rgba(0,0,0,0) 2px, rgba(0,0,0,0) 4px);
  opacity: 0; transition: opacity .2s;
}

/* Status */
.status{
  margin-top: 12px; font-size: .98rem; text-shadow: 0 0 8px var(--neon); opacity: .92;
}

/* Flash overlay */
.flash{
  position: fixed; inset: 0; opacity: 0; pointer-events: none; z-index: 999;
  background: radial-gradient(circle, rgba(0,255,102,.85), rgba(0,0,0,0) 60%);
  transition: opacity .33s ease;
}
.flash.show{ opacity: 1; }
.flash.red { background: radial-gradient(circle, rgba(255,0,0,.82), rgba(0,0,0,0) 60%); }

/* State cursors & shakes */
.omnitrix.transformed .dial{ cursor: not-allowed; }
.shake{
  animation: shake .4s ease both;
}

/* Animations */
@keyframes holo-float{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-8px)} }
@keyframes ring-pulse{ 0%,100%{ opacity: .55 } 50%{ opacity: .85 } }
@keyframes scan-rotate{ to{ transform: rotate(360deg)} }
@keyframes shake{
  0%{ transform: translate(0,0) }
  20%{ transform: translate(2px,-2px) }
  40%{ transform: translate(-2px,2px) }
  60%{ transform: translate(2px,2px) }
  80%{ transform: translate(-2px,-2px) }
  100%{ transform: translate(0,0) }
}

/* Low battery visuals */
.low .ring-fg{ stroke: #ff4d4d; filter: drop-shadow(0 0 6px #ff4d4d); }
.low .percent{ color: #ff9a9a; text-shadow: 0 0 6px #ff4d4d; }
.low .status{ color: #ff9a9a; text-shadow: 0 0 8px #ff4d4d; }
